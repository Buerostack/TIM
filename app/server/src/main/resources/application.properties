server.port=8085

# Primary DataSource for introspection service (read-only access to both schemas)
spring.datasource.url=jdbc:postgresql://postgres:5432/tim
spring.datasource.username=tim_introspect
spring.datasource.password=introspect_secure_pass_2024

spring.jpa.hibernate.ddl-auto=none
spring.datasource.hikari.maximum-pool-size=5

# JWT Signature Configuration
jwt.signature.key-store=file:/opt/tim/jwtkeystore.jks
jwt.signature.key-store-password=changeme
jwt.signature.key-store-type=JKS
jwt.signature.key-alias=jwtsign

tara.oidc.enabled=false

# Schema Isolation Configuration
# Custom JWT DataSource - restricted to custom_jwt schema
spring.datasource.custom-jwt.url=jdbc:postgresql://postgres:5432/tim
spring.datasource.custom-jwt.username=tim_custom_jwt
spring.datasource.custom-jwt.password=custom_jwt_secure_pass_2024
spring.datasource.custom-jwt.hikari.maximum-pool-size=3
spring.datasource.custom-jwt.driver-class-name=org.postgresql.Driver

# Auth DataSource - restricted to auth schema
spring.datasource.auth.url=jdbc:postgresql://postgres:5432/tim
spring.datasource.auth.username=tim_auth
spring.datasource.auth.password=auth_secure_pass_2024
spring.datasource.auth.hikari.maximum-pool-size=3
spring.datasource.auth.driver-class-name=org.postgresql.Driver

# JWT Custom Configuration
# Issuer identifier for this TIM instance
# IMPORTANT: Must be unique per TIM deployment for proper JWT ecosystem management
# Examples: TIM-PROD, TIM-DEV, TIM-STAGING, company-tim-prod, department-tim-dev
jwt.custom.issuer=TIM

# Enable audience validation (default: false)
jwt.custom.audience.validation.enabled=false

# Allowed audiences (comma-separated list)
# Only tokens with these audiences can be generated
# Example: jwt.custom.audience.allowed=payment-service,user-service,admin-dashboard
jwt.custom.audience.allowed=

# Default audience when none specified in generation request
# Used only when audience validation is enabled
jwt.custom.audience.default=tim-service
